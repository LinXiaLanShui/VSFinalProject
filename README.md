# 模拟天体运动
Planetary orbit simulation written in p5 js.

更新日志：
2023.12.13:
1. 比较上一个版本，修复了缩放比例轨迹偏移的bug
2. 增加了行星渲染发光，降低了渲染精度
3. 修改行星默认质量为1，由0.1
4. 取消了在行星上显示ID
5. 降低了每次绘画的迭代次数1000=>500,大概可以跑5颗行星不掉帧


### 项目简介
1. 模拟恒星系统，不考虑恒星的“微小”运动，只考虑行星运动
2. 考虑行星之间的万有引力和行星与恒星之间的万有引力
3. 不考虑碰撞合为一体
4. 模拟混乱行星系统前先删除预设的恒星

### 有两种模式:恒星系统 和 混乱系统
其实区别就是是否是否删除恒星, 因为这里的恒星对象是不考虑运动的
1. 恒星系统
   
   选择标准发射，可以改变发射行星的离心率
2. 混乱系统
   
    这个模式改变离心率没有意义，通过鼠标发射器发射一些列混乱行星吧，通过右下角输入框可以更改参数


###  项目执行流程为：
1. html页面加载时，先加载 p5.js 库。
2. p5.js 加载完成后，加载并执行 simulation.js 文件。
3. 执行 setup 函数进行初始设置，然后进入循环执行 draw 函数（在p5.js里定义了），不断更新画面。
   

### web页面指令
#### 创建
1. 'o'键: 创建围绕太阳圆周运动行星，再次按'o'改变方向, 只在太阳存在的时候才能这样创建标准轨道，可以改变离心率
2. 先勾选shooting，鼠标左键，创建行星(最低速度为5)
#### 删除
1. 普通key删除：选中 + 'd'键: 删除行星或者太阳，要鼠标选中的才能删除
2. 高级button删除:无论时鼠标选中还是select 选中，都可以删除
#### 显示信息
1. 鼠标点击行星，显示行星数据
2. select 选项选择行星
#### 暂停运动
    按下空格键，暂停运行，再次空格，继续运行
#### 修改离心率
只有恒星存在，且满足 
$$ pos_y = sun.pos.y\quad 和 \quad vel_x = 0 $$
才能修改离心率
#### 重置行星速度和行星
    reset 重置所选行星为初始状态
    resetAll:重置所有行星

    update:更新当前位置为初始状态
    updateAll:更新所有行星

#### 保存和加载模型
    save：保存当前模型的参数  注意: 行星数据保存的是初始速度，初始位置，保存模型前先updataAll(更新当前位置为初始速度，初始位置)。
    load:加载模型, ./model文件夹下已经有了一些预设的轨迹。 加载模型前先把模型放到./model文件夹下，并且修改simulation.js里的加载路径



##### 注意：
    1. 点击率屏幕上的button后建议点击空白取消键盘对屏幕上button的锁定，防止通过键盘误触button

#### 以后考虑增加的功能：
    颜料版选择修改行星颜色
    加载模型时可以select选择可用模型，以及可以设置保存模型名称


### 实验环境
vs code + 插件live server

alt + l, alt + o本地部署运行



have a good fun


